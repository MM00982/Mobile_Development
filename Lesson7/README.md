# Практическая работа №7

## Глава 1. Сетевое взаимодействие в Android

В первой главе были опробованы базовые способы прямой работы с сетью без сторонних фреймворков: сокеты и HttpURLConnection. 
Основная цель — научиться самостоятельно открывать соединение, контролировать объём трафика и аккуратно передавать данные между фоновым потоком и пользовательским интерфейсом.

### Задание 1. Получение времени по протоколу Daytime (Socket)

Создан отдельный модуль TimeService. Пользователь нажимает кнопку «Получить время» — запускается AsyncTask, открывающий TCP-сокет с 
сервером time.nist.gov на порту 13. Первая строка ответа отбрасывается, из второй извлекается дата и время атомных часов, после 
чего сокет закрывается. В onPostExecute() результат выводится в TextView, а в Logcat фиксируются обнаруженные ошибки соединения. 
Итог — экран с гарантированно распарсенной меткой времени и стабильно освобождёнными ресурсами сокета.

![image_2025-06-02_00-35-39](https://github.com/user-attachments/assets/4a0b54bc-4f6e-4b13-a03d-6e3b8a812e7b)
![image_2025-06-02_00-35-47](https://github.com/user-attachments/assets/f3d71cc0-fe38-4969-bf47-b9889dda22da)

### Задание 2. Определение внешнего IP-адреса и погоды (HttpURLConnection)

Во втором модуле HttpURLConnection продемонстрирована работа с HTTP-протоколом. После проверки сети через ConnectivityManager 
пользователь запускает AsyncTask, получающий JSON-ответ от сервиса ipinfo.io/json. Из объекта извлекаются город, регион, широта 
и долгота. Эти координаты формируют URL к open-meteo.com, откуда загружается текущая погода. Результаты разбора JSON выводятся в 
несколько отдельных TextView (IP, город, регион, температура, направление ветра).

![image_2025-06-02_00-53-33](https://github.com/user-attachments/assets/8d70873c-c60f-4f62-8eba-0bc15b9c2386)

---

## Глава 2. Сторонние библиотеки

Во второй главе рассмотрены высокоуровневые решения, избавляющие от рутинного парсинга и ручного управления подключением.
Retrofit 2 — подключён с Gson-конвертером; на его основе создан интерфейс для погодного API, 
что показало, насколько лаконичным может быть сетевой слой при использовании декларативного подхода.
Firebase SDK — интегрирован через ассистент Android Studio; особое внимание уделено сервису аутентификации.

### Задание 3. Аутентификация пользователей (FirebaseAuth)

Модуль FirebaseAuth реализует полный цикл Email/Password-аутентификации:
Регистрация — при нажатии «Create Account» создаётся учётная запись в Firebase; обрабатываются возможные ошибки сложности пароля и дублирования адреса.
Подтверждение e-mail — кнопка «Verify Email» отправляет письмо-подтверждение, а UI блокирует её до завершения операции.
Вход/Выход — «Sign In» авторизует пользователя, «Sign Out» выполняет выход и очищает экран.
Реактивный интерфейс — элементы управления автоматически скрываются/показываются в зависимости от currentUser.
После регистрации сделан скриншот консоли Firebase с появившимся UID; изображение помещено в res/raw. Так продемонстрирована связка локального клиента и облачной базы.

![image_2025-06-02_01-15-12](https://github.com/user-attachments/assets/edf41fdf-f24d-4d15-b992-55adbbf9b84a)
![image_2025-06-02_01-17-09](https://github.com/user-attachments/assets/2da042d8-c091-4d26-8a23-255f51b2d71e)
![image_2025-06-02_01-17-33](https://github.com/user-attachments/assets/864fe2d2-8405-400c-b3aa-c798866171c7)
![image_2025-06-02_01-17-51](https://github.com/user-attachments/assets/5b3441fd-1809-4c14-bd09-3e3c9c0b5169)
![image_2025-06-02_01-18-09](https://github.com/user-attachments/assets/b8e9aee8-90f6-4f68-a220-c72884ff92d9)
![image_2025-06-02_02-16-31](https://github.com/user-attachments/assets/1d1d1b55-ad4e-4435-92ae-913317325157)

---

## Глава 3. Контрольное задание (MireaProject)

В итоговом проекте MireaProject объединены все изученные подходы:
* Стартовая точка — отдельное activity авторизации через Firebase. Пока пользователь не подтвердит почту, вход блокируется.
* Главный экран — после удачного логина открывается MainActivity, где через навигационное меню доступен фрагмент NetworkInfoFragment.
* NetworkInfoFragment — использует Retrofit для запроса прогноза погоды по сохранённым координатам пользователя; результат связывается с UI через LiveData<WeatherDto>, что гарантирует обновление виджетов даже при повторном создании фрагмента.
* Обработка оффлайна — при отсутствии сети отображается Snackbar с предложением повторить запрос; успешная загрузка кэшируется в Room, чтобы данные оставались доступны без Интернета.

Таким образом, итоговая работа свела воедино прямое сетевое взаимодействие, высокоуровневые библиотеки и облачную авторизацию, образуя законченный прототип современного мобильного приложения.

![image_2025-06-02_01-54-43](https://github.com/user-attachments/assets/b0734969-4978-4975-ae6a-b3370b775641)
![image_2025-06-02_01-51-00](https://github.com/user-attachments/assets/8f621968-9497-4706-a928-2e08fae44a69)
![image_2025-06-02_01-51-10](https://github.com/user-attachments/assets/5de74ef5-e497-4c2f-87a8-e94c126ebccb)

---

## Вывод

В ходе практики освоены три слоя сетевого стека Android:
* Низкий уровень — прямые TCP-сокеты для точечной быстрой передачи данных.
* Средний уровень — HttpURLConnection с ручной обработкой заголовков и потоков.
* Высокий уровень — Retrofit и Firebase, позволяющие сосредоточиться на бизнес-логике, а не на деталях протокола.

Добавив авторизацию, реактивный UI и кэширование, проект подтверждает готовность использовать полученные знания в реальных 
приложениях — от простого запроса времени до полнофункционального клиент-серверного решения с пуш-уведомлениями и аналитикой.

---

**Выполнил**: Мусин М.Р.  
**Группа**: БСБО-09-22
